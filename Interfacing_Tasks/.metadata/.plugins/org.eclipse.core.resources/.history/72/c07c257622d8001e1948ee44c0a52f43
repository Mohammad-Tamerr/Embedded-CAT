/*
 * main.c
 *
 *  Created on: Mar 1, 2024
 *      Author: Mohammad Tamer
 */


typedef unsigned char u8;
typedef signed char s8;
#define PORT_A *((volatile u8*)0x3B)
#define DDR_A *((volatile u8*)0x3A)
#define PIN_A *((volatile u8*)0x39)

#define PORT_B *((volatile u8*)0x38)
#define DDR_B *((volatile u8*)0x37)
#define PIN_B *((volatile u8*)0x36)

#define PORT_C *((volatile u8*)0x35)
#define DDR_C *((volatile u8*)0x34)
#define PIN_C *((volatile u8*)0x33)

#define PORT_D *((volatile u8*)0x38)
#define DDR_D *((volatile u8*)0x37)
#define PIN_D *((volatile u8*)0x36)

#include <util/delay.h>


int main()
{
	s8 counter=0;
	u8 seven_seg_arr[10] =
	{
			    0x3F, // 0
			    0x06, // 1
			    0x5B, // 2
			    0x4F, // 3
			    0x66, // 4
			    0x6D, // 5
			    0x7D, // 6
			    0x07, // 7
			    0x7F, // 8
			    0x6F  // 9
	};

	// Set PORTA pin 0 as input for switch 1
	DDR_A &=~ (1 << 0);
	// Set PORTA pin 1 as input for switch 2
	DDR_A &=~ (1 << 1);
	// Enable pull-up resistors for PORTA pins
	PORT_A |= (1 << 0) | (1 << 1) ;
	// Set PORTC as output for seven-segment
	DDR_C =0xff ;

	while(1)
	{
		if ( !( (PIN_A>>0) &1) ) //Check if switch 1 is pressed
		{
			_delay_ms(50); // Debouncing delay
			if ( !( (PIN_A>>0) &1) )
			{
				for(counter =0; counter<10; counter++ )
				{
					PORT_C = seven_seg_arr[counter] ;
				}

				 while ( !( (PIN_A>>0) &1) )  // Wait until switch 1 is released
				  {
					 _delay_ms(50);    // Debouncing delay
			      }
		    }
	}
	return 0 ;
}
}



