/*
 * LM35_program.c
 *
 *  Created on: Jul 12, 2024
 *      Author: Mohammad Tamer
 */

#include "../../lib/STD_TYPES.h"
#include "../../lib/BIT_MATH.h"
#include "../../MCAL/DIO/DIO_interface.h"
#include "../../MCAL/PORT/PORT_interface.h"
#include "../../MCAL/ADC/ADC_interface.h"
#include "../../HAL/LCD_DRIVER/LCD_interface.h"
#include "LM35_config.h"
#include "LM35_interface.h"
#include "LM35_private.h"
#include <util/delay.h>
#define		MESSAGE	"Temperature: "

void Get_Void_Temp_Sync()
{
		u16 ADC_READING_VALUE = 1 ;
		ADC_u8StartConversionSynch(ADC_CHANNEL, &ADC_READING_VALUE);
        lcd_send_string(MESSAGE);
        u16 Millivolt = (u16)((u32)(ADC_READING_VALUE) * 5000UL / 1024);
        u16 Temp = Millivolt / 10; // Convert millivolt to Celsius
        lcd_go_to_xy(0, 13);
        lcd_show_number(Temp);
        _delay_ms(500);
        lcd_clear();
	    // Print raw ADC value for debugging
	    /*lcd_go_to_xy(1, 0);
	    lcd_show_number(ADC_READING_VALUE);
	    _delay_ms(1000) ;  // Delay to see the value on LCD
	    */
}

void Get_Void_Temp_ASync(void (*Copy_pvNotificationFunc)(void))
{
	u16 ADC_READING_VALUE = 1 ;
	Copy_pvNotificationFunc = Get_Void_Temp_ASync_Handle;
	ADC_u8StartConversionAsynch(ADC_CHANNEL, &ADC_READING_VALUE,Copy_pvNotificationFunc);
}

void Get_Void_Temp_ASync_Handle()
{

}


